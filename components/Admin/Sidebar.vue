<template>
  <aside class="sidebar" :class="sidebarCollapsed ? 'sidebar-hide':''">
    <nav class="sidebar__nav">
      <nuxt-link to="/admin/dashboard">
        <span><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 6C0 4.4087 0.632141 2.88258 1.75736 1.75736C2.88258 0.632141 4.4087 0 6 0C7.5913 0 9.11742 0.632141 10.2426 1.75736C11.3679 2.88258 12 4.4087 12 6C12 7.5913 11.3679 9.11742 10.2426 10.2426C9.11742 11.3679 7.5913 12 6 12C4.4087 12 2.88258 11.3679 1.75736 10.2426C0.632141 9.11742 0 7.5913 0 6ZM7.5 8.25C7.5 7.61953 7.11328 7.08047 6.5625 6.86016V2.0625C6.5625 1.75078 6.31172 1.5 6 1.5C5.68828 1.5 5.4375 1.75078 5.4375 2.0625V6.86016C4.88672 7.08281 4.5 7.62188 4.5 8.25C4.5 9.07734 5.17266 9.75 6 9.75C6.82734 9.75 7.5 9.07734 7.5 8.25ZM3.375 4.125C3.57391 4.125 3.76468 4.04598 3.90533 3.90533C4.04598 3.76468 4.125 3.57391 4.125 3.375C4.125 3.17609 4.04598 2.98532 3.90533 2.84467C3.76468 2.70402 3.57391 2.625 3.375 2.625C3.17609 2.625 2.98532 2.70402 2.84467 2.84467C2.70402 2.98532 2.625 3.17609 2.625 3.375C2.625 3.57391 2.70402 3.76468 2.84467 3.90533C2.98532 4.04598 3.17609 4.125 3.375 4.125ZM3 6C3 5.80109 2.92098 5.61032 2.78033 5.46967C2.63968 5.32902 2.44891 5.25 2.25 5.25C2.05109 5.25 1.86032 5.32902 1.71967 5.46967C1.57902 5.61032 1.5 5.80109 1.5 6C1.5 6.19891 1.57902 6.38968 1.71967 6.53033C1.86032 6.67098 2.05109 6.75 2.25 6.75C2.44891 6.75 2.63968 6.67098 2.78033 6.53033C2.92098 6.38968 3 6.19891 3 6ZM9.75 6.75C9.94891 6.75 10.1397 6.67098 10.2803 6.53033C10.421 6.38968 10.5 6.19891 10.5 6C10.5 5.80109 10.421 5.61032 10.2803 5.46967C10.1397 5.32902 9.94891 5.25 9.75 5.25C9.55109 5.25 9.36032 5.32902 9.21967 5.46967C9.07902 5.61032 9 5.80109 9 6C9 6.19891 9.07902 6.38968 9.21967 6.53033C9.36032 6.67098 9.55109 6.75 9.75 6.75ZM9.375 3.375C9.375 3.17609 9.29598 2.98532 9.15533 2.84467C9.01468 2.70402 8.82391 2.625 8.625 2.625C8.42609 2.625 8.23532 2.70402 8.09467 2.84467C7.95402 2.98532 7.875 3.17609 7.875 3.375C7.875 3.57391 7.95402 3.76468 8.09467 3.90533C8.23532 4.04598 8.42609 4.125 8.625 4.125C8.82391 4.125 9.01468 4.04598 9.15533 3.90533C9.29598 3.76468 9.375 3.57391 9.375 3.375Z" fill="#D5E4EF"/></svg></span>
        Dashboard
      </nuxt-link>
      <nuxt-link to="/admin/orders">
        <span><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.725 2.43238L10.4613 0.306976C10.3488 0.117167 10.1481 0 9.93416 0H2.06498C1.85105 0 1.65035 0.117167 1.53787 0.306976L0.271916 2.43238C-0.380909 3.52906 0.196929 5.05457 1.41656 5.23032C1.50478 5.24203 1.59521 5.24906 1.68343 5.24906C2.25906 5.24906 2.77073 4.98192 3.12141 4.5695C3.47208 4.98192 3.98375 5.24906 4.55938 5.24906C5.13502 5.24906 5.64669 4.98192 5.99736 4.5695C6.34804 4.98192 6.85971 5.24906 7.43534 5.24906C8.01318 5.24906 8.52265 4.98192 8.87332 4.5695C9.2262 4.98192 9.73567 5.24906 10.3113 5.24906C10.4017 5.24906 10.4899 5.24203 10.5782 5.23032C11.8022 5.05691 12.3823 3.5314 11.7272 2.43238H11.725ZM10.6686 5.97315H10.6664C10.5495 5.98955 10.4304 5.99893 10.3091 5.99893C10.0356 5.99893 9.77316 5.9544 9.52835 5.87473V8.99839H2.47079V5.87239C2.22377 5.9544 1.95911 5.99893 1.68563 5.99893C1.56433 5.99893 1.44303 5.98955 1.32614 5.97315H1.32393C1.23351 5.95909 1.14529 5.94269 1.05927 5.91925V8.99839V10.4981C1.05927 11.3253 1.69225 11.9979 2.47079 11.9979H9.52835C10.3069 11.9979 10.9399 11.3253 10.9399 10.4981V8.99839V5.91925C10.8516 5.94269 10.7634 5.96143 10.6686 5.97315Z" fill="#D5E4EF"/></svg></span>
        Orders
      </nuxt-link>
      <nuxt-link to="/admin/users">
        <span><svg width="12" height="10" viewBox="0 0 12 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.7 0C3.09782 0 3.47936 0.158035 3.76066 0.43934C4.04196 0.720644 4.2 1.10218 4.2 1.5C4.2 1.89782 4.04196 2.27936 3.76066 2.56066C3.47936 2.84196 3.09782 3 2.7 3C2.30218 3 1.92064 2.84196 1.63934 2.56066C1.35804 2.27936 1.2 1.89782 1.2 1.5C1.2 1.10218 1.35804 0.720644 1.63934 0.43934C1.92064 0.158035 2.30218 0 2.7 0ZM9.6 0C9.99783 0 10.3794 0.158035 10.6607 0.43934C10.942 0.720644 11.1 1.10218 11.1 1.5C11.1 1.89782 10.942 2.27936 10.6607 2.56066C10.3794 2.84196 9.99783 3 9.6 3C9.20218 3 8.82064 2.84196 8.53934 2.56066C8.25804 2.27936 8.1 1.89782 8.1 1.5C8.1 1.10218 8.25804 0.720644 8.53934 0.43934C8.82064 0.158035 9.20218 0 9.6 0ZM0 5.60062C0 4.49625 0.89625 3.6 2.00063 3.6H2.80125C3.09938 3.6 3.3825 3.66562 3.6375 3.78187C3.61313 3.91687 3.60188 4.0575 3.60188 4.2C3.60188 4.91625 3.91688 5.55937 4.41375 6C4.41 6 4.40625 6 4.40063 6H0.399375C0.18 6 0 5.82 0 5.60062ZM7.59938 6C7.59563 6 7.59188 6 7.58625 6C8.085 5.55937 8.39813 4.91625 8.39813 4.2C8.39813 4.0575 8.385 3.91875 8.3625 3.78187C8.6175 3.66375 8.90063 3.6 9.19875 3.6H9.99938C11.1038 3.6 12 4.49625 12 5.60062C12 5.82187 11.82 6 11.6006 6H7.59938ZM4.2 4.2C4.2 3.72261 4.38964 3.26477 4.72721 2.92721C5.06477 2.58964 5.52261 2.4 6 2.4C6.47739 2.4 6.93523 2.58964 7.27279 2.92721C7.61036 3.26477 7.8 3.72261 7.8 4.2C7.8 4.67739 7.61036 5.13523 7.27279 5.47279C6.93523 5.81036 6.47739 6 6 6C5.52261 6 5.06477 5.81036 4.72721 5.47279C4.38964 5.13523 4.2 4.67739 4.2 4.2ZM2.4 9.09937C2.4 7.71937 3.51937 6.6 4.89937 6.6H7.10063C8.48063 6.6 9.6 7.71937 9.6 9.09937C9.6 9.375 9.37688 9.6 9.09938 9.6H2.90063C2.625 9.6 2.4 9.37687 2.4 9.09937Z" fill="#D5E4EF"/></svg></span>
        Users
      </nuxt-link>
      <button @click.prevent="collapse" type="button">
        <span>
          <svg v-if="sidebarCollapsed" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 6C0 7.5913 0.632141 9.11742 1.75736 10.2426C2.88258 11.3679 4.4087 12 6 12C7.5913 12 9.11742 11.3679 10.2426 10.2426C11.3679 9.11742 12 7.5913 12 6C12 4.4087 11.3679 2.88258 10.2426 1.75736C9.11742 0.632141 7.5913 0 6 0C4.4087 0 2.88258 0.632141 1.75736 1.75736C0.632141 2.88258 0 4.4087 0 6ZM6.90469 3.16641L9.24609 5.67656C9.32812 5.76562 9.375 5.88047 9.375 6C9.375 6.11953 9.32812 6.23672 9.24609 6.32344L6.90469 8.83359C6.80625 8.93906 6.66797 9 6.52266 9C6.23437 9 6 8.76563 6 8.47734V7.125H3.75C3.33516 7.125 3 6.78984 3 6.375V5.625C3 5.21016 3.33516 4.875 3.75 4.875H6V3.52266C6 3.23438 6.23437 3 6.52266 3C6.66797 3 6.80625 3.06094 6.90469 3.16641Z" fill="#D5E4EF"/></svg>
          <svg v-else width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6C12 4.4087 11.3679 2.88258 10.2426 1.75736C9.11742 0.632141 7.5913 0 6 0C4.4087 0 2.88258 0.632141 1.75736 1.75736C0.632141 2.88258 0 4.4087 0 6C0 7.5913 0.632141 9.11742 1.75736 10.2426C2.88258 11.3679 4.4087 12 6 12C7.5913 12 9.11742 11.3679 10.2426 10.2426C11.3679 9.11742 12 7.5913 12 6ZM5.09531 8.83359L2.75391 6.32344C2.67188 6.23437 2.625 6.11953 2.625 6C2.625 5.88047 2.67188 5.76328 2.75391 5.67656L5.09531 3.16641C5.19375 3.06094 5.33203 3 5.47734 3C5.76562 3 6 3.23438 6 3.52266V4.875H8.25C8.66484 4.875 9 5.21016 9 5.625V6.375C9 6.78984 8.66484 7.125 8.25 7.125H6V8.47734C6 8.76563 5.76562 9 5.47734 9C5.33203 9 5.19375 8.93906 5.09531 8.83359Z" fill="#D5E4EF"/></svg>
        </span>
        Collapse menu
      </button>
    </nav>
  </aside>
</template>

<script setup lang="ts">
import { useGlobalStore } from '~/stores/global';
const globalStore = useGlobalStore()

const sidebarCollapsed = ref(false)

const collapse = () => {
  sidebarCollapsed.value = sidebarCollapsed.value ? false : true
  const layoutAdmin = document.querySelector('.layout__admin')

  if(sidebarCollapsed.value){
    layoutAdmin.classList.add('layout__admin-collapsed')
  } else {
    layoutAdmin.classList.remove('layout__admin-collapsed')
  }
}

if(process.client){
  setTimeout(() => {
    if(globalStore.width < 768){
      collapse()
    }
  }, 0)
}
</script>

<style lang="scss" scoped>
.sidebar{
  padding: 32px 0;
  position: fixed;
  left: 0;
  top: 48px;
  width: 160px;
  height: calc(var(--vh, 1vh) * 100 - 48px);
  z-index: 100;
  background: var(--dark-blue);
  transition: .25s;
  &-hide{
    width: 32px;
    overflow: hidden;
    .sidebar__nav{
      a, button{
        font-size: 0;
        color: transparent;
        transition: .25s ease 0s;
      }
    }
  }
  &__nav{
    a, button{
      display: block;
      color: var(--light-blue2);
      font-size: 14px;
      font-weight: 400;
      line-height: 120%;
      height: 32px;
      width: 100%;
      display: flex;
      align-items: center;
      text-decoration: none;
      transition: .25s ease .2s;
      background: none;
      border: none;
      padding: 0;
      &:hover{
        background: rgba(var(--light-blue-rgb), .2);
      }
      &.router-link-exact-active{
        background: var(--light-blue);
      }
    }
    svg{
      width: 16px;
      height: auto;
    }
    span{
      display: flex;
      justify-content: center;
      align-items: center;
      width: 32px;
      height: 32px;
      pointer-events: none;
    }
  }
}
</style>